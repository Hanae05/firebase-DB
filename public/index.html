<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>[firebase] my-sample-project</title>

    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->
    
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>

    <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyBM4wnow8KBd2vjdlWfIyARAqp0shovcaE",
      authDomain: "express-6b16e.firebaseapp.com",
      databaseURL: "https://express-6b16e.firebaseio.com",
      projectId: "express-6b16e",
      storageBucket: "express-6b16e.appspot.com",
      messagingSenderId: "711055930536",
      appId: "1:711055930536:web:35e75a374dfbfe077d3e9d"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    </script>

    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

    <script>
      //----------------------------------------------
      // Firebase UIの設定
      //----------------------------------------------
      var uiConfig = {
          callbacks: {
            signInSuccess: function(currentUser, credential, redirectUrl) {
              // サインイン成功時のコールバック関数
              // 戻り値で自動的にリダイレクトするかどうかを指定
              return true;
            },
            uiShown: function() {
            // FirebaseUIウィジェット描画完了時のコールバック関数

            // 読込中で表示しているローダー要素を消す
            document.getElementById('loader').style.display = 'none';

            // 読み込み後に表示させたい
            document.getElementById('login').textContent = '登録する';
            }
          },
          // リダイレクトではなく、ポップアップでサインインフローを表示
          signInFlow: 'popup',

          //ログイン時のリダイレクト先
          signInSuccessUrl: 'firebase01-in.html',

          //利用する認証機能
          signInOptions: [
            {
              // サポートするプロバイダ(メールアドレス)を指定
              provider:firebase.auth.GoogleAuthProvider.PROVIDER_ID,
            },
            {
              provider:firebase.auth.FacebookAuthProvider.PROVIDER_ID,
              scopes: [
                'public_profile',
                'email',
                'user_likes',
                'user_friends'
              ],
              customParameters: {
                // Forces password re-entry.
                auth_type: 'reauthenticate'
              }
            },
            {
              provider:firebase.auth.TwitterAuthProvider.PROVIDER_ID,
              requireDisplayName: false
            },
            {
              provider:firebase.auth.GithubAuthProvider.PROVIDER_ID,
              requireDisplayName: false
            }
          ],
          // 利用規約のURL(任意)
          tosUrl: 'privacy.html',
          // プライバシーポリシーのURL(任意)
          privacyPolicyUrl: 'privacy.html'
      };

      var ui = new firebaseui.auth.AuthUI(firebase.auth());
      ui.start('#firebaseui-auth-container', uiConfig);
    </script>
  </head>

  <body>
    <div id="login"></div>
    <div id="firebaseui-auth-container"></div>
    <div id="loader">Loading...</div>

  </body>
</html>
