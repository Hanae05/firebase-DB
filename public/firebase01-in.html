<!DOCTYPE html>
<html>
  <head>
    <meat charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../style.css">
    <title>Using FirebaseUI Auth, on the Web</title>

    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
          apiKey: "AIzaSyBM4wnow8KBd2vjdlWfIyARAqp0shovcaE",
          authDomain: "express-6b16e.firebaseapp.com",
          databaseURL: "https://express-6b16e.firebaseio.com",
          projectId: "express-6b16e",
          storageBucket: "express-6b16e.appspot.com",
          messagingSenderId: "711055930536",
          appId: "1:711055930536:web:35e75a374dfbfe077d3e9d"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
    </script>

    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

  </head>

  <body>
    <header>
      <p>firebaseでアプリ作ってみた</p>
    </header>
      
    <div class="main">
      <div class="top">
        <h1 align="center">Singed-In: Firebase Auth Quickstart Demo</h1>
        <h1 id="status">Not Sign-in.</h1>
        <h1 id="user_about"></h1>
        <h1 id="user"></h1>
      </div>
    </div>
  
    <footer>
      <p><small>2020 by Hana</small></p>
    </footer>

    <script type="text/javascript">
    var name, email, photoUrl, uid, emailVerified;

    firebase.auth().onAuthStateChanged( (user) => {
         let status = document.querySelector('#status');
         let user_about = document.querySelector('#user_about');
         if(user) {
            name = user.displayName;
            email = user.email;
            photoUrl = user.photoURL;
            emailVerified = user.emailVerified;
            uid = user.uid;    
            user_about.innerText = 'name = ' + name + ',email = ' + email+ ',photo = ' + photoUrl + ',emailVerified = ' + emailVerified + ',uid = ', uid;  
            status.innerText = 'Singed-in';
            document.querySelector('#user').innerHTML = '<img src="' + photoUrl +'">';
         } else {
             status.innerText = 'NOT Singed-in';
         }

     } );
    
    </script>
  </body>
</html>